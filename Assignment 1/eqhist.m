function [A] = eqhist(img_path, G)   # Read image  img_org = imread(img_path);  # convert to greyscale It's already greyscale.  #img = rgb2gray(img_org);    img = uint8(img_org);  # Get dimensions.  [ih iw channels] = size(img);    # Create an array   h = [1:G];  h = 0 .* h;    #Calculate the number of pixels with the same color.  for i = 1:ih    for j = 1:iw      h(img(i,j)) = h(img(i,j)) + 1;     endfor  endfor    H = [1:G];  H = 0 .* H;  H(1) = h(1);  for i = 2:G    H(i) = H(i-1) + h(i);  endfor     M = [1:G];  M = 0 .* M;  for i = 2:G    M(i) = round((G-1) * H(i) / (ih *iw));  endfor    img_clone  = img;    for i = 1:ih    for j = 1:iw      img_clone(i,j) = M(img_clone(i,j));     endfor  endfor    figure();  subplot(2, 2, 1);  imshow(img);  subplot(2, 2, 2);  imhist (img);  subplot(2, 2, 3);  imshow (img_clone);  subplot(2, 2, 4);  imhist (img_clone);  A = img_org;end 